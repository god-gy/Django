{% extends 'base.html' %}
{% block content %}
    <h1>{{ todo.title }} Page</h1>
    <div style="text-align: right">
        {% if request.user == todo.user or request.user.is_superuser %}
            <form action="{% url 'cbv:update' todo.pk %}" method="get" style="display: inline">
                {% csrf_token %}
                <button>수정하기</button>
            </form>
            <form action="{% url 'cbv:delete' todo.pk %}" method="post" style="display: inline">
                {% csrf_token %}
                <button type="submit">삭제하기</button>
            </form>
        {% endif %}
    </div>
    <hr>
    <p>본문 : {{ todo.description }}</p>
    <p>시작일 : {{ todo.start_date }}</p>
    <p>종료일 : {{ todo.end_date }}</p>
    <p>완료여부 : {{ todo.is_complete }}</p>
    <p>생성일시 : {{ todo.created_at }}</p>
    <p>수정일시 : {{ todo.modified_at }}</p>
    <hr>

    <div class="mb-3" id="comment_wrapper">
        {% for comment in page_obj %}
            <div class="border-bottom">
                {{ comment.massage }} <small>({{ comment.created_at|date:"Y.m.d H:i" }})</small>
            <p class="text-end">
                {{ comment.user.username }}
            </p>
            </div>
        {% endfor %}
    </div>

    <button type="submit" onclick="window.location.href='{% url 'cbv:list' %}'">목록보기</button>
{% endblock %}